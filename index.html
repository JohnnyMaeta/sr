<button id="start">録画開始</button>
<div id="status"></div>
<script>
const say = t => (document.getElementById('status').textContent = t);

document.getElementById('start').onclick = async () => {
  try {
    if (!navigator.mediaDevices || !navigator.mediaDevices.getDisplayMedia) {
      say('このブラウザは画面録画未対応です。PCのChrome/Edgeで試してね。');
      return;
    }
    say('権限ダイアログを待っています…');
    const stream = await navigator.mediaDevices.getDisplayMedia({video:true, audio:true});
    say('取得できました！停止すると終了します。');
    // 後続処理はここに
    stream.getTracks().forEach(t => t.stop());
  } catch (e) {
    console.error(e);
    say('開始できません: ' + e.name + ' / ' + e.message + '（OSの「画面収録」権限も確認）');
  }
};
</script>
